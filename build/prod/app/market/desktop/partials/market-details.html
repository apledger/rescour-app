<div class="property-details {{current.getStatusClass()}}" ng-controller="DetailsController">
<div class="page-header clearfix">
    <button class="btn pull-right" ng-click="close()"><i class="icon-remove"></i>&nbsp;Close</button>
    <h2>{{current.title}}</h2>
    <h4>{{current.getAddress()}}</h4>
</div>
<div tabs ng-cloak>
<div pane class="container-fluid" select-fn="selectPane(panes[0])" heading="{{panes[0].heading}}"
     active="panes[0].active">
    <div class="row-fluid">
        <div class="span12">
            <table class="table table-bordered">
                <tbody>
                <tr ng-hide="current.getAttribute('datePosted') == 'Not Available'">
                    <td>
                        <strong>Date Posted</strong>
                    </td>
                    <td>
                        {{current.datePosted | date}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>Property Status</strong>
                    </td>
                    <td>
                        {{current.getAttribute('propertyStatus')}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>Broker</strong>
                    </td>
                    <td>
                        {{current.getAttribute('broker')}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>Year Built</strong>
                    </td>
                    <td>
                        {{current.getAttribute('yearBuilt')}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>Number of Units</strong>
                    </td>
                    <td>
                        {{current.getAttribute('numUnits')}}
                    </td>
                </tr>
                <tr ng-show="current.callForOffers">
                    <td>
                        <strong>Call for Offers</strong>
                    </td>
                    <td>
                        {{current.callForOffers | date}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>Property Type</strong>
                    </td>
                    <td>
                        {{current.getAttribute('propertyType')}}
                    </td>
                </tr>
                <tr ng-show="current.acres">
                    <td>
                        <strong>Acres</strong>
                    </td>
                    <td>
                        {{current.acres}}
                    </td>
                </tr>
                <tr ng-show="current.price">
                    <td>
                        <strong>Price</strong>
                    </td>
                    <td>
                        {{current.price}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <strong>Flyer</strong>
                    </td>
                    <td>
                        <a ng-show="current.flyer" target="_blank" ng-href="{{current.flyer}}">View</a>
                    </td>
                </tr>
                <tr ng-show="current.page">
                    <td>
                        <strong>Additional Documentation</strong>
                    </td>
                    <td>
                        <a target="_blank" ng-href="{{current.page}}">View</a>
                    </td>
                </tr>
                <tr ng-show="current.portfolio && current.portfolio.length > 0">
                    <td>
                        <strong>Portfolio</strong>
                    </td>
                    <td>
                        <ul>
                            <li ng-repeat="listing in current.portfolio">{{listing.title}}</li>
                        </ul>
                    </td>
                </tr>
                <tr ng-show="current.walkscore">
                    <td>
                        <strong><a href="http://www.walkscore.com/how-it-works.shtml" target="_blank">Walk Score</a>&reg;</a></strong>
                    </td>
                    <td>
                        <a ng-href="{{current.walkscore.ws_link}}" target="_blank">{{current.walkscore.walkscore}}</a> ( {{current.walkscore.description}} )
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div class="page-header">
            </div>
            <p class="lead">Description</p>

            <p>{{current.description}}</p>
        </div>
    </div>

    <div class="row-fluid" ng-show="current.comps && current.comps.length > 0">
        <div class="span12">
            <div class="page-header">
            </div>
            <p class="lead">Comps</p>

            <blockquote ng-repeat="comp in current.comps">
                <p ng-show="comp.title"><strong>{{comp.title}}</strong></p>

                <p ng-show="comp.body">{{comp.body}}</p>
                <small><cite><a ng-href="{{comp.link}}" target="_blank">View Source</a></cite></small>
            </blockquote>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12" ng-show="current.unitMix">
            <div class="page-header"></div>
            <p class="lead">Property Unit Mix</p>
            <table class="table table-condensed table-striped">
                <thead>
                <tr>
                    <th>Type</th>
                    <th>Units</th>
                    <th>SF</th>
                    <th>Rent</th>
                    <th>Rent / SF</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="mix in current.unitMix">
                    <td>
                        {{mix.type}}
                    </td>
                    <td>
                        {{mix.units}}
                    </td>
                    <td>
                        {{mix.sqft}}
                    </td>
                    <td>
                        {{mix.rent && (mix.rent | currency) || ""}}
                        <!--{{mix.rent | currency}}-->
                    </td>
                    <td>
                        {{mix.rentpsqft && (mix.rentpsqft | currency) || ""}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span4" ng-show="current.tourDates">
            <div class="page-header">
            </div>
            <p class="lead">Tour Dates</p>
            <table class="table table-condensed table-striped">
                <tbody>
                <tr ng-repeat="tourDate in current.tourDates">
                    <td>
                        {{tourDate.date | date}}
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div pane class="container-fluid picture-container" heading="{{panes[1].heading}}" active="panes[1].active">
    <div class="row-fluid">
        <div class="span10 offset1" ng-show="current.images.length > 0">

            <div img-viewer images="current.images"></div>
        </div>
        <div class="alert alert-info" ng-show="current.images.length == 0">
            <strong>Sorry!</strong> We don't have any images for this listing.
        </div>
    </div>
</div>

<div pane class="container-fluid" heading="{{panes[2].heading}}" active="panes[2].active">
    <div alert type="alert.type" fade-after="2000" ng-repeat="alert in contactAlerts">{{alert.msg}}</div>
    <form class="contact-form" ng-show="current.contacts.length > 0">
        <div class="control-group">
            <div class="control-label">To:</div>
            <div class="controls">
                <label class="checkbox" ng-class="{'contact-selected': contact.selected}"
                       ng-repeat="contact in current.contacts">
                    <input type="checkbox" ng-model="contact.selected">
                    <strong>{{contact.name}}</strong> - <em>{{contact.phone}}</em> - {{contact.email}}
                </label>
            </div>
        </div>
        <div class="control-group">
            <div class="control-label">Message:</div>
            <div class="controls row-fluid">
                <textarea rows="6" class="span12" ng-model="newEmail.text"></textarea>
            </div>
        </div>
        <div class="form-actions">
            <button class="btn" type="submit" ng-click="sendEmail(newEmail)">Send</button>
        </div>
    </form>
    <div class="alert" ng-show="!current.contacts || current.contacts.length == 0">
        <strong>Sorry!</strong> We don't
        have any contacts for this listing.
    </div>
</div>

<div pane class="container-fluid" heading="{{panes[3].heading}}" active="panes[3].active">
    <div ng-repeat="comment in current.resources.comments">
        <div class="alert alert-info comment-alert" spinner="comment.$spinner">
            <h5>{{comment.userEmail}} <span>{{comment.timestamp | date}}</span></h5>

            <p>{{comment.text}}</p>
        </div>
    </div>
    <form name="formNewComment" novalidate>
        <div class="control-group">
            <div class="control-label">Comment:</div>
            <div class="controls row-fluid">
                <textarea rows="6" name="text" class="span12" required ng-model="newComment.text"></textarea>
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn" ng-click="addComment(newComment)">
                Add Comment
            </button>
            <!--<div class="icon-button" tooltip="Attach File">-->
                <!--<i class="icon-paper-clip"></i>-->
            <!--</div>-->
        </div>
    </form>
</div>

<div pane class="container-fluid finance-container" heading="{{panes[4].heading}}" active="panes[4].active">
    <div class="row-fluid">
        <div class="span12">
            <form novalidate class="form-horizontal">
                <legend></legend>
                <div class="control-group" ng-repeat="finance in current.resources.finances">
                    <a href="javascript:" class="finance-delete" ng-click="deleteFinance(finance)">
                        <i class="icon-remove-sign"></i>
                    </a>

                    <div class="control-label">
                        <input placeholder="Click to edit" name="name"
                               class="edit-label"
                               type="text" ng-model="finance.name"
                               typeahead-select="field for field in financeFields | filter:$viewValue">
                        <i class="icon-pencil"></i>
                    </div>

                    <div class="controls">
                        <input placeholder="Value" type="text" name="value"
                               ng-blur="saveFinance(finance)" ng-model="finance.value"
                               class="input-large">

                        <div class="control-spinner" spinner="finance.$spinner"></div>
                    </div>
                </div>
                <div class="form-actions">
                    <a href="javascript:" class="btn" ng-click="addFinance()">Add Finance Note</a>
                </div>
            </form>
        </div>
    </div>
</div>

<!--<div pane class="container-fluid rentmetrics-container" heading="{{panes[5].heading}}" active="panes[5].active">-->
    <!--<div class="row-fluid">-->
        <!--<div class="span12">-->
            <!--<div class="page-header">-->
                <!--<span><strong>Averages</strong> for the past</span>-->

                <!--<div class="input-dropdown">-->
                    <!--<input type="text"-->
                           <!--placeholder="Days"-->
                           <!--ng-model="rentMetrics.past"-->
                           <!--ui-keypress="{13: 'keypressBlur($event)'}"-->
                           <!--ng-blur="setRentCompsPast()"/>-->
                <!--</div>-->
                <!--<span>days within</span>-->

                <!--<div class="input-dropdown">-->
                    <!--<input type="text"-->
                           <!--placeholder="Days"-->
                           <!--ng-model="rentMetrics.radius"-->
                           <!--ui-keypress="{13: 'keypressBlur($event)'}"-->
                           <!--ng-blur="refreshRentComps()"/>-->


                <!--</div>-->
                <!--<span>miles</span>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="row-fluid">-->
        <!--<div class="span12">-->
            <!--<table class="table table-striped table-condensed">-->
                <!--<thead>-->
                <!--<tr>-->
                    <!--<th>Type</th>-->
                    <!--<th>Rent</th>-->
                    <!--<th>Sq Ft</th>-->
                    <!--<th>Count</th>-->
                <!--</tr>-->
                <!--</thead>-->
                <!--<tbody spinner="rentMetrics.$spinner" spinner-options="{'top': 10}">-->
                <!--<tr ng-repeat="average in rentMetrics.getAverages() | orderBy: 'bedrooms'">-->
                    <!--<td>{{ average.type }}</td>-->
                    <!--<td>{{ average.rent / average.count | currency }}</td>-->
                    <!--<td>{{ average.sqft / average.count | number:0 }}</td>-->
                    <!--<td>{{ average.count }}</td>-->
                <!--</tr>-->
                <!--</tbody>-->
            <!--</table>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->

</div>
</div>